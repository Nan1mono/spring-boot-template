<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.template.mapper.RolePermissionMapper">

    <select id="findUserPermission" parameterType="list" resultType="java.lang.String">
        SELECT
            sys_permission.permission_code
        FROM sys_role_permission
        LEFT JOIN sys_permission
        ON sys_role_permission.permission_id = sys_permission.id
        AND sys_permission.is_deleted = 0
        WHERE sys_role_permission.is_deleted = 0
        <if test="roleIdList != null and roleIdList.size > 0">
            AND sys_role_permission.role_id IN
            <foreach collection="roleIdList" item="roleId" open="(" close=")" index="">
                #{roleId}
            </foreach>
        </if>
    </select>

</mapper>
